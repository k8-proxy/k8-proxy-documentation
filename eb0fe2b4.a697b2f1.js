(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{109:function(e,t,o){"use strict";o.r(t),o.d(t,"frontMatter",(function(){return s})),o.d(t,"metadata",(function(){return i})),o.d(t,"rightToc",(function(){return l})),o.d(t,"default",(function(){return p}));var r=o(2),n=o(6),a=(o(0),o(115)),s={title:"gwwebsite Overview",sidebar_label:"Overview"},i={unversionedId:"websites/gwwebsite/overview",id:"websites/gwwebsite/overview",isDocsHomePage:!1,title:"gwwebsite Overview",description:"see Development Websites Dashboard for details",source:"@site/docs/websites/gwwebsite/overview.md",slug:"/websites/gwwebsite/overview",permalink:"/k8-proxy-documentation/docs/websites/gwwebsite/overview",version:"current",sidebar_label:"Overview",sidebar:"docs",previous:{title:"atlassian Overview",permalink:"/k8-proxy-documentation/docs/websites/atlassian/overview"},next:{title:"mastercard Overview",permalink:"/k8-proxy-documentation/docs/websites/mastercard/overview"}},l=[{value:"Reverse Proxy for gp-glasswallsolutions-website",id:"reverse-proxy-for-gp-glasswallsolutions-website",children:[]}],c={rightToc:l};function p(e){var t=e.components,o=Object(n.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},c,o,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"see ",Object(a.b)("a",{parentName:"p",href:"/k8-proxy-documentation/docs/dashboards/websites/production"},"Development Websites Dashboard for details")),Object(a.b)("h2",{id:"reverse-proxy-for-gp-glasswallsolutions-website"},"Reverse Proxy for gp-glasswallsolutions-website"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Follow the steps given in ",Object(a.b)("a",{parentName:"p",href:"https://github.com/k8-proxy/s-k8-proxy-rebuild/tree/master/stable-src#install-kubernetes"},"https://github.com/k8-proxy/s-k8-proxy-rebuild/tree/master/stable-src#install-kubernetes")," to install Rancher and a kubernetes cluster. At the end of this step, you will be successfully able to connect to a kubernetes cluster.")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Build and Push the nginx, squid and icap server docker images to a docker registry by following steps given in ",Object(a.b)("a",{parentName:"p",href:"https://github.com/k8-proxy/s-k8-proxy-rebuild/tree/master/stable-src#apps-deployment"},"https://github.com/k8-proxy/s-k8-proxy-rebuild/tree/master/stable-src#apps-deployment"),". At the end of this step, you should have 3 docker images with repository URLs and image tags")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Clone ",Object(a.b)("a",{parentName:"p",href:"https://github.com/k8-proxy/s-k8-proxy-rebuild.git"},"https://github.com/k8-proxy/s-k8-proxy-rebuild.git")," repository"))),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"git clone https://github.com/k8-proxy/s-k8-proxy-rebuild.git\n")),Object(a.b)("ol",{start:4},Object(a.b)("li",{parentName:"ol"},"From ",Object(a.b)("inlineCode",{parentName:"li"},"stable-src")," directory of ",Object(a.b)("a",{parentName:"li",href:"https://github.com/k8-proxy/s-k8-proxy-rebuild"},"k8-proxy/s-k8-proxy-rebuild")," repository run below commands to deploy the helm chart for proxy solution of glasswallsolution.com website. Update below command with docker repository url and image tag before running the command.")),Object(a.b)("p",null,"Make sure the variable ",Object(a.b)("inlineCode",{parentName:"p"},"KUBECONFIG")," is pointing to the path of ",Object(a.b)("inlineCode",{parentName:"p"},"kubeconfig")," file from the current terminal."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"helm upgrade --install \\\n--set image.nginx.repository=<docker registry>/reverse-proxy-nginx \\\n--set image.nginx.tag=0.0.1 \\\n--set image.squid.repository=<docker registry>/reverse-proxy-squid \\\n--set image.squid.tag=0.0.1 \\\n--set image.icap.repository=<docker registry>/reverse-proxy-c-icap \\\n--set image.icap.tag=0.0.1 \\\n--set application.nginx.env.ALLOWED_DOMAINS='glasswallsolutions.com.glasswall-icap.com\\,www.glasswallsolutions.com.glasswall-icap.com' \\\n--set application.nginx.env.ROOT_DOMAIN='glasswall-icap.com' \\\n--set application.nginx.env.SUBFILTER_ENV='glasswallsolutions.com\\,glasswallsolutions.com.glasswall-icap.com' \\\n--set application.squid.env.ALLOWED_DOMAINS='glasswallsolutions.com.glasswall-icap.com\\,www.glasswallsolutions.com.glasswall-icap.com' \\\n--set application.squid.env.ROOT_DOMAIN='glasswall-icap.com' \\\n--set icap.limit.cpu=500m \\\n--set icap.requests.cpu=500m \\\nglasswallsolutions chart/\n")),Object(a.b)("ol",{start:5},Object(a.b)("li",{parentName:"ol"},"Validation:")),Object(a.b)("p",null,"Once all the pods are running, there are 2 options to connect to the proxied website."),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"Forward the traffic from local machine to nginx service.")),Object(a.b)("p",null,"If the below command gives permission error to bind the port 443, please run the command with ",Object(a.b)("inlineCode",{parentName:"p"},"root")," user."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"kubectl port-forward svc/glasswallsolutions-reverse-proxy-nginx 443:443\n")),Object(a.b)("p",null,"You have to assign all proxied domains to the localhost address by adding them to hosts file ( ",Object(a.b)("inlineCode",{parentName:"p"},"C:\\Windows\\System32\\drivers\\etc\\hosts")," on Windows , ",Object(a.b)("inlineCode",{parentName:"p"},"/etc/hosts")," on Linux )\nfor example: "),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"127.0.0.1 glasswallsolutions.com.glasswall-icap.com www.glasswallsolutions.com.glasswall-icap.com\n")),Object(a.b)("ol",{start:2},Object(a.b)("li",{parentName:"ol"},"Connect using nginx ingress.")),Object(a.b)("p",null,"You have to assign all proxied domains to the IP address of the machine where helm chart is deployed by adding them to hosts file ( ",Object(a.b)("inlineCode",{parentName:"p"},"C:\\Windows\\System32\\drivers\\etc\\hosts")," on Windows , ",Object(a.b)("inlineCode",{parentName:"p"},"/etc/hosts")," on Linux )"),Object(a.b)("p",null,"  For example: "),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"54.78.209.23 glasswallsolutions.com.glasswall-icap.com www.glasswallsolutions.com.glasswall-icap.com\n")),Object(a.b)("p",null,"You can test the stack functionality by downloading ",Object(a.b)("a",{parentName:"p",href:"https://glasswallsolutions.com.glasswall-icap.com/wp-content/uploads/2020/01/Glasswall-d-FIRST-Technology.pdf"},"a rich PDF file")," through the proxy and testing it against ",Object(a.b)("a",{parentName:"p",href:"https://file-drop.co.uk"},"file-drop.co.uk"),"\nYou can also visit ",Object(a.b)("a",{parentName:"p",href:"https://glasswallsolutions.com.glasswall-icap.com"},"the proxied main page")," and make sure that the page loads correctly and no requests/links is pointing to the original ",Object(a.b)("inlineCode",{parentName:"p"},"*.glasswallsolutions.com")," or other malformed domains."))}p.isMDXComponent=!0},115:function(e,t,o){"use strict";o.d(t,"a",(function(){return b})),o.d(t,"b",(function(){return d}));var r=o(0),n=o.n(r);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function s(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?s(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var c=n.a.createContext({}),p=function(e){var t=n.a.useContext(c),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},b=function(e){var t=p(e.components);return n.a.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},m=n.a.forwardRef((function(e,t){var o=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),b=p(o),m=r,d=b["".concat(s,".").concat(m)]||b[m]||u[m]||a;return o?n.a.createElement(d,i(i({ref:t},c),{},{components:o})):n.a.createElement(d,i({ref:t},c))}));function d(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=o.length,s=new Array(a);s[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var c=2;c<a;c++)s[c]=o[c];return n.a.createElement.apply(null,s)}return n.a.createElement.apply(null,o)}m.displayName="MDXCreateElement"}}]);