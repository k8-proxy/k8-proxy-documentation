(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{71:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return p})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return s}));var o=n(2),r=n(6),a=(n(0),n(99)),i={title:"php Code Sample",sidebar_label:"php Code Sample"},p={unversionedId:"products/gw cloud sdk/php-sample",id:"products/gw cloud sdk/php-sample",isDocsHomePage:!1,title:"php Code Sample",description:"php",source:"@site/docs/products/gw cloud sdk/php-sample.md",slug:"/products/gw cloud sdk/php-sample",permalink:"/k8-proxy-documentation/docs/products/gw cloud sdk/php-sample",version:"current",sidebar_label:"php Code Sample",sidebar:"docs",previous:{title:"Deployment",permalink:"/k8-proxy-documentation/docs/products/gw cloud sdk/deployment"},next:{title:"Python/PHP Code Sample",permalink:"/k8-proxy-documentation/docs/products/gw cloud sdk/python-sample"}},l=[{value:"api/rebuild/base64",id:"apirebuildbase64",children:[]}],c={rightToc:l};function s(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(a.b)("wrapper",Object(o.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h1",{id:"php"},"php"),Object(a.b)("p",null,"The following code snippets are examples of calling the Rebuild API using php. The requests library is used to execute calls to the API."),Object(a.b)("h2",{id:"apirebuildbase64"},"api/rebuild/base64"),Object(a.b)("p",null,"\u200bIn this example files are loaded from the OS and a request with the content type of 'application/json' is formed. The request is then sent to the API using the POST method. The JSON body also contains the content management flags."),Object(a.b)("p",null,"The rebuilt file is returned as Base64, decoded by the client and written to disk."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},'<?php\n$jwt_token = "YOUR_JWT_TOKEN";\n$url = "https://gzlhbtpvk2.execute-api.eu-west-1.amazonaws.com/Prod/api/rebuild/file";\n// local file\n$Input_File = \'YOUR/INPUT/FILE.docx\';\n$output_file_path = "YOUR/OUTPUT/FILE.docx";\n// convert base64 encoded bytes to string\n$base64 = base64_encode(file_get_contents($Input_File));\n$data = [\n    \'Base64\' => $base64,\n    \'ContentManagementFlags\' => [\n        \'WordContentManagement\' => [\n            \'ReviewComments\' => \'0\'\n        ],\n    ]\n];\n$json_data = json_encode($data);\n// build post request with file  "Authorization: jwt_token,\n$context = stream_context_create([\n    \'http\' => [\n        \'method\' => \'POST\',\n        \'header\' => "Authorization: " . $jwt_token . "\\r\\n" .\n            "Content-type: application/json\\r\\n" .\n            "Accept: application/json\\r\\n" .\n            "Connection: close\\r\\n" .\n            "Content-length: " . strlen($json_data) . "\\r\\n",\n        \'content\' => $json_data\n    ],\n\n]);\n//Send a file to Glasswall\'s Rebuild API  endpoint, returns base64 encoded bytes\n$response = file_get_contents($url, false, $context);\nif ($response === false) {\n    exit("Unable to get data at $url");\n}\n//decode base64 string to bytes\n$base64_string_output = base64_decode($response);\n//save file to local\nif (file_put_contents($output_file_path, $base64_string_output)) {\n    echo "File downloaded successfully";\n} else {\n    echo "File downloading failed.";\n}\n\n')))}s.isMDXComponent=!0},99:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return f}));var o=n(0),r=n.n(o);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=r.a.createContext({}),s=function(e){var t=r.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):p(p({},t),e)),n},u=function(e){var t=s(e.components);return r.a.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},b=r.a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,i=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=s(n),b=o,f=u["".concat(i,".").concat(b)]||u[b]||d[b]||a;return n?r.a.createElement(f,p(p({ref:t},c),{},{components:n})):r.a.createElement(f,p({ref:t},c))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=b;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p.mdxType="string"==typeof e?e:o,i[1]=p;for(var c=2;c<a;c++)i[c]=n[c];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);