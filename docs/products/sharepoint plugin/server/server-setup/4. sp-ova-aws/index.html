<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.66">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-165717322-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-165717322-1",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Documentation" href="/k8-proxy-documentation/opensearch.xml"><title data-react-helmet="true">Sharepoint OVA in AWS | Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Sharepoint OVA in AWS | Documentation"><meta data-react-helmet="true" name="description" content="General info"><meta data-react-helmet="true" property="og:description" content="General info"><meta data-react-helmet="true" property="og:url" content="https://k8-proxy.github.io/k8-proxy-documentation/docs/products/sharepoint plugin/server/server-setup/4. sp-ova-aws"><link data-react-helmet="true" rel="shortcut icon" href="/k8-proxy-documentation/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://k8-proxy.github.io/k8-proxy-documentation/docs/products/sharepoint plugin/server/server-setup/4. sp-ova-aws"><link rel="stylesheet" href="/k8-proxy-documentation/styles.b931d363.css">
<link rel="preload" href="/k8-proxy-documentation/styles.c7346e6c.js" as="script">
<link rel="preload" href="/k8-proxy-documentation/runtime~main.cc56d492.js" as="script">
<link rel="preload" href="/k8-proxy-documentation/main.0c429f7f.js" as="script">
<link rel="preload" href="/k8-proxy-documentation/1.f8546111.js" as="script">
<link rel="preload" href="/k8-proxy-documentation/2.11d5d372.js" as="script">
<link rel="preload" href="/k8-proxy-documentation/35.2957bb7f.js" as="script">
<link rel="preload" href="/k8-proxy-documentation/38.76cf8d11.js" as="script">
<link rel="preload" href="/k8-proxy-documentation/935f2afb.d0a39c50.js" as="script">
<link rel="preload" href="/k8-proxy-documentation/17896441.3a66c92f.js" as="script">
<link rel="preload" href="/k8-proxy-documentation/b31d7437.922fd0ad.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/k8-proxy-documentation/"><img class="navbar__logo" src="/k8-proxy-documentation/img/glasswall_logo_blue.png" alt="Glasswall Logo"><strong class="navbar__title">Documentation</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/k8-proxy" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/k8-proxy-documentation/"><img class="navbar__logo" src="/k8-proxy-documentation/img/glasswall_logo_blue.png" alt="Glasswall Logo"><strong class="navbar__title">Documentation</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/k8-proxy" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Products</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">File Drop</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/products/filedrop/fd-aws">Deploying File Drop on AWS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/products/filedrop/fd-esxi">Deploying File Drop on ESXi</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/products/filedrop/fd-howto">How to use File Drop</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">GW Cloud SDK</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/products/gw cloud sdk/a-overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/products/gw cloud sdk/b-endpoints">Endpoints</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/products/gw cloud sdk/c-fd-integration-aws">FileDrop Integration AWS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/products/gw cloud sdk/c-fd-integration">FileDrop Integration ESXi</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/products/gw cloud sdk/d-desktop-integration">GW Desktop Integration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/products/gw cloud sdk/deployment">Deployment</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">GW Desktop App</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/products/gw desktop app/overview">GW Desktop App</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">GW Proxy</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/products/gw proxy/overview">GW Proxy</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">ICAP Server</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/products/icap server/icap-aws">Deploying ICAP Server on AWS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/products/icap server/icap-esxi">Deploying ICAP Server on ESXI &amp; Virtualbox</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/products/icap server/icap-howto">How to use ICAP Server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/products/icap server/icap-ui">Management UI user guide</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Sharepoint Plugin</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">online</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/products/sharepoint plugin/online/sharepoint-online-solution-administration">Sharepoint Online Solution Administration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/products/sharepoint plugin/online/sharepoint-online-solution-deployment">Sharepoint Online Solution Deployment</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">server</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">server-setup</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/k8-proxy-documentation/docs/products/sharepoint plugin/server/server-setup/1. overview">VM Setup Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/k8-proxy-documentation/docs/products/sharepoint plugin/server/server-setup/2. sp-vm-manual-install">Sharepoint VM - Manual Install</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/k8-proxy-documentation/docs/products/sharepoint plugin/server/server-setup/3. sp-vhd-to-ova">Sharepoint VHD to OVA</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/k8-proxy-documentation/docs/products/sharepoint plugin/server/server-setup/4. sp-ova-aws">Sharepoint OVA in AWS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/k8-proxy-documentation/docs/products/sharepoint plugin/server/server-setup/5. export-ova-aws">Export OVA from AWS</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/k8-proxy-documentation/docs/products/sharepoint plugin/server/sharepoint-server-solution-administration">Sharepoint Server  Solution Administration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/k8-proxy-documentation/docs/products/sharepoint plugin/server/sharepoint-server-solution-deployment">SharePoint Server - Solution Deployment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/k8-proxy-documentation/docs/products/sharepoint plugin/server/sharepoint-server-solution-uninstall">File Handler App Deployment Uninstall</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">web</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/products/sharepoint plugin/web/overview">Overview</a></li></ul></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Sharepoint OVA in AWS</h1></header><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="general-info"></a>General info<a aria-hidden="true" tabindex="-1" class="hash-link" href="#general-info" title="Direct link to heading">#</a></h1><ul><li>Version: Sharepoint 2019</li><li>Topology: Single Server Farm</li><li>Target: OVA in AWS</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="pre-requisites"></a>Pre-Requisites<a aria-hidden="true" tabindex="-1" class="hash-link" href="#pre-requisites" title="Direct link to heading">#</a></h2><p>Sharepoint 2019 OVA
<a href="https://github.com/k8-proxy/k8-proxy-documentation/blob/master/docs/websites/sharepoint/server/server-setup/3.%20sp-vhd-to-ova.md" target="_blank" rel="noopener noreferrer">Follow these steps</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="glasswall-ova-image-deployment-in-aws"></a>Glasswall OVA image Deployment in AWS<a aria-hidden="true" tabindex="-1" class="hash-link" href="#glasswall-ova-image-deployment-in-aws" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="upload-ova-file"></a>Upload OVA File<a aria-hidden="true" tabindex="-1" class="hash-link" href="#upload-ova-file" title="Direct link to heading">#</a></h3><p>Once VHD is converted into OVA, it&#x27;s time to upload it into AWS storage. To upload OVA into AWS, followed below steps.</p><ol><li>Log In into AWS Portal, Search for <strong>S3</strong> and open it.</li></ol><p><img src="/k8-proxy-documentation/assets/images/image010-eb2763b83bf147374b176a0feaecc4c6.png"></p><ol start="2"><li>Once <strong>Amazon S3</strong> is open, created a bucket. Where we will be uploading our OVA file.</li></ol><p><img src="/k8-proxy-documentation/assets/images/image011-b98c0ad66b01495b84fcc3daa24c2127.png"></p><ol start="3"><li>Created a <strong>Bucket</strong> by specificing the name of it.</li></ol><p><img src="/k8-proxy-documentation/assets/images/image012-9a89bb8707af36882a2d87bf3431cc9d.png"></p><ol start="4"><li>Once Bucket is created, Open Bucket and clicked on <strong>Upload</strong>.</li></ol><p><img src="/k8-proxy-documentation/assets/images/image013-4b58dba55d11bb1cd2fb9fa6709205fe.png"></p><ol start="5"><li>On <strong>Upload</strong>, Selected <strong>Add Files</strong>.</li></ol><p><img src="/k8-proxy-documentation/assets/images/image014-1860180abf1d2424334cb9018e3a985a.png"></p><ol start="6"><li>Browsed the specific OVA file located in your local machine and clicked on <strong>Open</strong>.</li></ol><p><img src="/k8-proxy-documentation/assets/images/image015-c3fb36f0347160cc4cb21c4012f1e87b.png"></p><ol start="7"><li>Once the file is ready to upload click on <strong>Upload</strong>.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="import-amis"></a>Import AMIs<a aria-hidden="true" tabindex="-1" class="hash-link" href="#import-amis" title="Direct link to heading">#</a></h3><p>After uploading the OVA file, now it&#x27;s time to import it for the Virtual Instant. To Import the OVA into Virtual Instant, we need to install AWS CLI (Follow instruction at <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-install.html" target="_blank" rel="noopener noreferrer">Installation of AWS CLI</a>. Once CLI is installed Configure it and import below Policies.</p><ol><li>Create a file named <em>trust-policy.json</em> on your computer. Add the following policy to the file</li></ol><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;Version&quot;: &quot;2012-10-17&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;Statement&quot;: </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;Effect&quot;: &quot;Allow&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;Principal&quot;: { &quot;Service&quot;: &quot;vmie.amazonaws.com&quot; },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;Action&quot;: &quot;sts:AssumeRole&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;Condition&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;StringEquals&quot;:{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;sts:Externalid&quot;: &quot;vmimport&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><ol start="2"><li>Use the <a href="https://docs.aws.amazon.com/cli/latest/reference/iam/create-role.html" target="_blank" rel="noopener noreferrer">create-role</a> command to create a role named <em>vmimport</em> and grant <strong>VM Import/Export</strong> access to it. Ensure that you specify the full path to the location of the <em>trust-policy.json</em> file that you created in the previous step, and that you include the <code>file://</code> prefix as shown the following example:</li></ol><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">aws iam create-role --role-name vmimport --assume-role-policy-document &#x27;file://f:\vhd01\trust-policy.json&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div><p><img src="/k8-proxy-documentation/assets/images/image016-18190e66e70c10f51a455ffc024cd6e6.png"></p><ol start="3"><li>Create a file named <em>role-policy.json</em> with the following policy, where disk-image-file-bucket is the bucket for disk images and export-bucket is the bucket for exported images</li></ol><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;Version&quot;:&quot;2012-10-17&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;Statement&quot;:[</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;Effect&quot;:&quot;Allow&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;Action&quot;:[</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;s3:GetBucketLocation&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;s3:GetObject&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;s3:ListBucket&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;Resource&quot;:[</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;arn:aws:s3:::spserverova&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;arn:aws:s3:::spserverova/*&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Effect&quot;:&quot;Allow&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Action&quot;:[</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;ec2:ModifySnapshotAttribute&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;ec2:CopySnapshot&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;ec2:RegisterImage&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;ec2:Describe*&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Resource&quot;:&quot;*&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><ol start="4"><li>Use the following <a href="https://docs.aws.amazon.com/cli/latest/reference/iam/put-role-policy.html" target="_blank" rel="noopener noreferrer">put-role-policy</a> command to attach the policy to the role created above. Ensure that you specify the full path to the location of the <em>role-policy.json</em> file.</li></ol><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">aws iam put-role-policy --role-name vmimport --policy-name vmimport --policy-document &#x27;file://f:\vhd01\role-policy.json&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div><p><img src="data:image/png;base64,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"></p><ol start="5"><li>Once the policy has been imported, Created a <em>container.json</em> file as of below text.</li></ol><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Description&quot;: &quot;SP Server OVA&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Format&quot;: &quot;ova&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;UserBucket&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;S3Bucket&quot;: &quot;spserverova&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;S3Key&quot;: &quot;sp-svr-vm.ova&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">]</span></div></div></div></div></div><p><img src="/k8-proxy-documentation/assets/images/image018-30ed39a2486cd6566a5c6aad315637c5.png"></p><ol start="6"><li>After creating <em>container.json</em> use below cmdlet to import image.</li></ol><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">aws ec2 import-image --description &#x27;SP Server OVA&#x27; --disk-containers &#x27;file://f:\vhd01\container.json&#x27;</span></div></div></div></div></div><p><img src="/k8-proxy-documentation/assets/images/image019-a6114dc5eec1b7012c811b122d3551d9.png"></p><p>If this succeeds, go to point 7.</p><p>If you encounter the error <strong>(InvalidParameter)</strong> when calling the <em>Import Image</em> operation: User does not have access to the S3 object.&#x27;
Then you&#x27;ll need to get a session token with the following command</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">aws sts get-session-token --serial-number arn:aws:iam::{your_aws_user_id}:mfa/{your_aws_user_name} --token-code {your_aws_mfa_code}</span></div></div></div></div></div><p>this returns a token as per below:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;Credentials&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;AccessKeyId&quot;: &quot;AccessKeyId&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;SecretAccessKey&quot;: &quot;SecretAccessKey&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;SessionToken&quot;: &quot;SessionToken&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Expiration&quot;: &quot;Expiration&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>run the commands below, replacing the values from the token values you just got:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">export AWS_ACCESS_KEY_ID={AccessKeyId}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">export AWS_SECRET_ACCESS_KEY={SecretAccessKey}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">export AWS_SESSION_TOKEN={SessionToken}</span></div></div></div></div></div><p>Then run again the below, and all should be ok.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">aws ec2 import-image --description &#x27;SP Server OVA&#x27; --disk-containers &#x27;file://f:\vhd01\container.json&#x27;</span></div></div></div></div></div><ol start="7"><li>You can check the status of the of importing image using below cmdlet</li></ol><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">aws ec2 describe-import-image-tasks --import-task-ids import-ami-01d535d9bfdc0044e</span></div></div></div></div></div><p><img src="/k8-proxy-documentation/assets/images/image020-afd52b17b945da05195490d560b9beee.png"></p><ol start="8"><li>Check until you do have status as of below, it should show status as completed.</li></ol><p><img src="/k8-proxy-documentation/assets/images/image021-d3d3d2b94a50fdd6193187d649b75896.png"></p><ol start="9"><li>Once the status is completed, you will be able to see imported instance under <strong>AMIs</strong>.</li></ol><p><img src="/k8-proxy-documentation/assets/images/image022-5671586b6e2223ea31be998df05f32b2.png"></p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="launch-instance"></a>Launch Instance<a aria-hidden="true" tabindex="-1" class="hash-link" href="#launch-instance" title="Direct link to heading">#</a></h1><p>Once the image is available in <em>AMIs</em>, we can start with Launching Instance. Follow below steps to Launch Instance.</p><ol><li>On the &#x27;AMIs&#x27; , select the machine and clicked on <strong>Launch</strong>.</li></ol><p><img src="/k8-proxy-documentation/assets/images/image023-6863ef0f34d11408a7e450444b7c5156.png"></p><ol start="2"><li>Selected the Instance specs as of in Azure and clicked on <strong>Review and Launch</strong>.</li></ol><p><img src="/k8-proxy-documentation/assets/images/image024-0d17430710592c76f09f7cad754c5723.png"></p><ol start="3"><li>Validated the Instance configuration and clicked on <strong>Launch</strong>.</li></ol><p><img src="/k8-proxy-documentation/assets/images/image025-893db899806c762a41b1829c699cfbcf.png"></p><ol start="4"><li>On the key pair type selected <strong>Proceed without a key pair</strong> to get authenticated with domain credentials on the machine. And selected on <strong>Launch Instances</strong>.</li></ol><p><img src="/k8-proxy-documentation/assets/images/image026-16a65fee6310d66f2a1a0556b3c9fcae.png"></p><ol start="5"><li>It will take while to launch you instance, to view the status of instance click on <strong>View Instances</strong>.</li></ol><p><img src="/k8-proxy-documentation/assets/images/image027-85d30c947e63c2f2319d5e7d1a31e48c.png"></p><ol start="6"><li>Once the &#x27;Instance state&#x27; is <strong>Running</strong>, click on <strong>Action</strong> and follow steps in section below to access the instance. </li></ol><p><img src="/k8-proxy-documentation/assets/images/image028-f48e78679c7c5cb0529467b0ad059e4d.png"></p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="access-the-instance"></a>Access the Instance<a aria-hidden="true" tabindex="-1" class="hash-link" href="#access-the-instance" title="Direct link to heading">#</a></h1><ol><li>Install Remote Desktop<ul><li>On WIN it is installed by default.</li><li>On MAC download the Microsoft Remote Desktop app from the Mac App Store.</li><li>On Linux use <a href="https://remmina.org/" target="_blank" rel="noopener noreferrer">Remmina</a></li></ul></li><li>On AWS, go to EC2 &gt; Instances &gt; Click on the instance you created in previous section .</li><li>Click <code>Connect</code> and choose <code>RDP client</code> tab.</li><li>From there check the OVA username and ask for password to be shared (it will not be seen from AWS).</li><li>Choose <code>Download remote desktop file</code>.</li><li>Once downloaded, open the file.</li><li>You will possible get some certificates warnnings but accept all until you get Win login screen</li><li>Login with credentials from step 4.</li></ol><p>In case of any issues, check official <a href="https://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/connecting_to_windows_instance.html#connect-rdp" target="_blank" rel="noopener noreferrer">documentation</a>.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/k8-proxy-documentation/docs/products/sharepoint plugin/server/server-setup/3. sp-vhd-to-ova"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Sharepoint Server OVA</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/k8-proxy-documentation/docs/products/sharepoint plugin/server/server-setup/5. export-ova-aws"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Export OVA from AWS Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#pre-requisites" class="table-of-contents__link">Pre-Requisites</a></li><li><a href="#glasswall-ova-image-deployment-in-aws" class="table-of-contents__link">Glasswall OVA image Deployment in AWS</a><ul><li><a href="#upload-ova-file" class="table-of-contents__link">Upload OVA File</a></li><li><a href="#import-amis" class="table-of-contents__link">Import AMIs</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/k8-proxy-documentation/docs/products">Getting Started</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2021 Glasswall Solutions Ltd. Built with Docusaurus.</div></div></div></footer></div>
<script src="/k8-proxy-documentation/styles.c7346e6c.js"></script>
<script src="/k8-proxy-documentation/runtime~main.cc56d492.js"></script>
<script src="/k8-proxy-documentation/main.0c429f7f.js"></script>
<script src="/k8-proxy-documentation/1.f8546111.js"></script>
<script src="/k8-proxy-documentation/2.11d5d372.js"></script>
<script src="/k8-proxy-documentation/35.2957bb7f.js"></script>
<script src="/k8-proxy-documentation/38.76cf8d11.js"></script>
<script src="/k8-proxy-documentation/935f2afb.d0a39c50.js"></script>
<script src="/k8-proxy-documentation/17896441.3a66c92f.js"></script>
<script src="/k8-proxy-documentation/b31d7437.922fd0ad.js"></script>
</body>
</html>