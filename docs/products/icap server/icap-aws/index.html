<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.66">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-165717322-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-165717322-1",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Documentation" href="/EAP-documentation/opensearch.xml"><title data-react-helmet="true">Deploying ICAP Server on AWS | Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Deploying ICAP Server on AWS | Documentation"><meta data-react-helmet="true" name="description" content="Installation video"><meta data-react-helmet="true" property="og:description" content="Installation video"><meta data-react-helmet="true" property="og:url" content="https://k8-proxy.github.io/EAP-documentation/docs/products/icap server/icap-aws"><link data-react-helmet="true" rel="shortcut icon" href="/EAP-documentation/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://k8-proxy.github.io/EAP-documentation/docs/products/icap server/icap-aws"><link rel="stylesheet" href="/EAP-documentation/styles.b931d363.css">
<link rel="preload" href="/EAP-documentation/styles.839b2ce0.js" as="script">
<link rel="preload" href="/EAP-documentation/runtime~main.263d2334.js" as="script">
<link rel="preload" href="/EAP-documentation/main.9508753c.js" as="script">
<link rel="preload" href="/EAP-documentation/1.8ee7a208.js" as="script">
<link rel="preload" href="/EAP-documentation/2.85dbad46.js" as="script">
<link rel="preload" href="/EAP-documentation/37.54ed0b04.js" as="script">
<link rel="preload" href="/EAP-documentation/40.fce27c6d.js" as="script">
<link rel="preload" href="/EAP-documentation/935f2afb.faa6a3a8.js" as="script">
<link rel="preload" href="/EAP-documentation/17896441.700a4f5a.js" as="script">
<link rel="preload" href="/EAP-documentation/458ca0c4.e039dded.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/EAP-documentation/"><img class="navbar__logo" src="/EAP-documentation/img/glasswall_logo_blue.png" alt="Glasswall Logo"><strong class="navbar__title">Documentation</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/k8-proxy" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/EAP-documentation/"><img class="navbar__logo" src="/EAP-documentation/img/glasswall_logo_blue.png" alt="Glasswall Logo"><strong class="navbar__title">Documentation</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/k8-proxy" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Products</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/EAP-documentation/docs/products/a-main">Welcome</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">File Drop</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/EAP-documentation/docs/products/filedrop/fd-aws">Deploying File Drop on AWS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/EAP-documentation/docs/products/filedrop/fd-esxi">Deploying File Drop on ESXi</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/EAP-documentation/docs/products/filedrop/fd-howto">How to use File Drop</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">GW Cloud SDK</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/EAP-documentation/docs/products/gw cloud sdk/a-overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/EAP-documentation/docs/products/gw cloud sdk/b-endpoints">Endpoints</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/EAP-documentation/docs/products/gw cloud sdk/c-fd-integration-aws">FileDrop Integration AWS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/EAP-documentation/docs/products/gw cloud sdk/c-fd-integration">FileDrop Integration ESXi</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/EAP-documentation/docs/products/gw cloud sdk/d-desktop-integration">GW Desktop Integration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/EAP-documentation/docs/products/gw cloud sdk/deployment">Deployment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/EAP-documentation/docs/products/gw cloud sdk/python-sample">Python Code Sample</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">GW Desktop App</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/EAP-documentation/docs/products/gw desktop app/overview">GW Desktop App</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">GW Proxy</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/EAP-documentation/docs/products/gw proxy/overview">GW Proxy</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">ICAP Server</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/EAP-documentation/docs/products/icap server/icap-aws">Deploying ICAP Server on AWS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/EAP-documentation/docs/products/icap server/icap-esxi">Deploying ICAP Server on ESXI &amp; Virtualbox</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/EAP-documentation/docs/products/icap server/icap-howto">How to use ICAP Server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/EAP-documentation/docs/products/icap server/icap-ui">Management UI user guide</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Sharepoint Plugin</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">online</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/EAP-documentation/docs/products/sharepoint plugin/online/sharepoint-online-solution-administration">Sharepoint Online Solution Administration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/EAP-documentation/docs/products/sharepoint plugin/online/sharepoint-online-solution-deployment">Sharepoint Online Solution Deployment</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">server</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">server-setup</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/EAP-documentation/docs/products/sharepoint plugin/server/server-setup/1. overview">VM Setup Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/EAP-documentation/docs/products/sharepoint plugin/server/server-setup/2. sp-vm-manual-install">Sharepoint VM - Manual Install</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/EAP-documentation/docs/products/sharepoint plugin/server/server-setup/3. sp-vhd-to-ova">Sharepoint VHD to OVA</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/EAP-documentation/docs/products/sharepoint plugin/server/server-setup/4. sp-ova-aws">Sharepoint OVA in AWS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/EAP-documentation/docs/products/sharepoint plugin/server/server-setup/5. export-ova-aws">Export OVA from AWS</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/EAP-documentation/docs/products/sharepoint plugin/server/sharepoint-server-solution-administration">Sharepoint Server  Solution Administration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/EAP-documentation/docs/products/sharepoint plugin/server/sharepoint-server-solution-deployment">SharePoint Server - Solution Deployment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/EAP-documentation/docs/products/sharepoint plugin/server/sharepoint-server-solution-uninstall">File Handler App Deployment Uninstall</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">web</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/EAP-documentation/docs/products/sharepoint plugin/web/overview">Overview</a></li></ul></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Deploying ICAP Server on AWS</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="installation-video"></a>Installation video<a aria-hidden="true" tabindex="-1" class="hash-link" href="#installation-video" title="Direct link to heading">#</a></h2><ul><li>Installation Video (OVA)</li></ul><p><a href="https://www.youtube.com/watch?v=f5ETATR7eX4&amp;feature=youtu.be" target="_blank" rel="noopener noreferrer"><img src="https://img.youtube.com/vi/f5ETATR7eX4/hqdefault.jpg" alt="Installation Video (OVA)"></a></p><ul><li>Installation Video (AMI)</li></ul><p><a href="https://www.youtube.com/watch?v=DUo-Qnw4ojE&amp;feature=youtu.be" target="_blank" rel="noopener noreferrer"><img src="https://img.youtube.com/vi/DUo-Qnw4ojE/hqdefault.jpg" alt="Installation Video (OVA)"></a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="prerequisites"></a>Prerequisites<a aria-hidden="true" tabindex="-1" class="hash-link" href="#prerequisites" title="Direct link to heading">#</a></h2><ul><li>ICAP Server AMI ID or OVA</li><li>Enable AWS Security Token Service (AWS STS) in the Region where you plan to use VM Import</li><li>AWS CLI</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="setup-aws-access"></a>Setup AWS access<a aria-hidden="true" tabindex="-1" class="hash-link" href="#setup-aws-access" title="Direct link to heading">#</a></h2><ul><li><p>Install <a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html" target="_blank" rel="noopener noreferrer">AWS CLI</a> on your local machine</p><ul><li>AWS CLI installation <a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2-linux.html" target="_blank" rel="noopener noreferrer">Linux</a>:<div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl &quot;https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip&quot; -o &quot;awscliv2.zip&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">unzip awscliv2.zip</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sudo ./aws/install</span></div></div></div></div></div></li><li>AWS CLI installation <a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2-windows.html" target="_blank" rel="noopener noreferrer">WIN</a>:<div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">- Download and install msi: https://awscli.amazonaws.com/AWSCLIV2.msi</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- To verify AWS CLI was installed succesufully open CMD and run: aws --version</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- Result should be like: aws-cli/2.1.1 Python/3.7.4 Windows/10 botocore/2.0.0</span></div></div></div></div></div></li></ul></li><li><p><a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-quickstart.html" target="_blank" rel="noopener noreferrer">Setup AWS Console access</a></p><ul><li>From CMD run: <code>aws configure</code>. </li><li>Enter the data for values as they pop up.<div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">example:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    AWS Access Key ID [None]: AKIAIOSFODNN7EXAMPLE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    AWS Secret Access Key [None]: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Default region name [None]: eu-west-1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Default output format [None]: json</span></div></div></div></div></div></li></ul></li><li><p>If your have MFA token enabled for authentication to AWS account you should <a href="https://aws.amazon.com/premiumsupport/knowledge-center/authenticate-mfa-cli/" target="_blank" rel="noopener noreferrer">set up MFA token authenticate through AWS CLI</a></p><ul><li>Run: <code>aws sts get-session-token --serial-number arn-of-the-mfa-device --token-code code-from-token</code></li><li>Replace arn-of-the-mfa-device with your username and AWS number and enter MFA code as code-from-token </li><li>Then export the values<div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">export AWS_ACCESS_KEY_ID=&lt;Value&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">export AWS_SECRET_ACCESS_KEY=&lt;Value&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">export AWS_SESSION_TOKEN= &lt;Value&gt;</span></div></div></div></div></div></li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="deploying-icap-server-ova"></a>Deploying ICAP Server OVA<a aria-hidden="true" tabindex="-1" class="hash-link" href="#deploying-icap-server-ova" title="Direct link to heading">#</a></h2><ul><li>After downloading ICAP Server OVA, navigate to AWS S3 &gt; Buckets &gt; Create Bucket &gt; Upload ICAP Server OVA</li><li>In your local machine, run <code>aws configure</code>, specifying the region of where the bucket was created</li><li>Create Service Role as instructed <a href="https://docs.aws.amazon.com/vm-import/latest/userguide/vmie_prereqs.html#vmimport-role" target="_blank" rel="noopener noreferrer">here</a></li><li>Create a <code>containers.json</code> file as shown below:<div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;Description&quot;: &quot;My Server OVA&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;Format&quot;: &quot;ova&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;UserBucket&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;S3Bucket&quot;: &quot;my-import-bucket&quot;, </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;S3Key&quot;: &quot;vms/my-server-vm.ova&quot; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}]</span></div></div></div></div></div></li></ul><ul><li><p>Run <code>aws ec2 import-image --description &quot;My server disks&quot; --disk-containers &quot;file://PATH_TO_containers.json&quot;</code></p></li><li><p>Monitor import by running </p></li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">aws ec2 describe-import-image-tasks --import-task-ids import-ami-ID</span></div></div></div></div></div><ul><li>Use final AMI ID you got and follow the steps in next section</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="deploying-icap-server-ami"></a>Deploying ICAP Server AMI<a aria-hidden="true" tabindex="-1" class="hash-link" href="#deploying-icap-server-ami" title="Direct link to heading">#</a></h2><ul><li><p>Navigate to AWS &gt; EC2 &gt; Launch Instance &gt; AMIs</p></li><li><p>Search for the AMI with the specific ID</p><ul><li>Instance Type: <code>t2.large</code></li><li>Storage: 20 GB</li><li>Security Group: <ul><li>Create a new security group &gt; Add Rule:<ul><li>Custom TCP &gt; Port 1344 [ICAP Client Connection]</li><li>SSH &gt; Port 22 [SSH to ICAP Instance]</li><li>HTTPS &gt; Port 443 [ICAP Management UI]</li><li>Custom TCP &gt; 1345 [ICAP client connection over TLS]</li><li>Custom TCP &gt; 7000 [Instance based health check metrics]</li></ul></li></ul></li></ul></li><li><p>Review &amp; Launch</p></li><li><p>Create or use existing key pair [<strong>Note</strong>: Your key pair is important for SSH]</p></li><li><p>Once the instance is in running state, it takes around 5-10 minutes for all the services to be healthy</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="remove-internet-access-from-icap-server-optional"></a>Remove Internet Access From ICAP Server (Optional)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#remove-internet-access-from-icap-server-optional" title="Direct link to heading">#</a></h2><ul><li>EC2 &gt; Navigate to your instance &gt; Under your Instance Summary &gt; Security
<img src="https://user-images.githubusercontent.com/60857664/108712705-d735df00-751f-11eb-9bdb-388cbf43a687.png" alt="security-tab"></li><li>Security Details &gt; Security Groups &gt; Click on <code>sg-...</code> (your launch-wizard)</li><li>Outbound rules tab &gt; Edit outbound rules &gt; Delete the outbound rule &amp; save rules
<img src="https://user-images.githubusercontent.com/60857664/108713672-36e0ba00-7521-11eb-93d1-e10246562216.png" alt="Screenshot from 2021-02-22 15-18-03"></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="troubleshooting"></a>Troubleshooting<a aria-hidden="true" tabindex="-1" class="hash-link" href="#troubleshooting" title="Direct link to heading">#</a></h2><ul><li>If the UI does not load, run <code>kubectl get pod -A</code> to check the status of pods</li><li>If their status is not <code>ready</code>, in home directory run <code>./flush_iptables.sh</code></li><li>Then run <code>sudo systemctl restart k3s</code></li><li>Give it ~10 minutes before usage</li><li>In case you see <code>metricbit</code> pod crashing, bare in mind, this will not impact the system setup. In case there is an elasticsearch in private network which can be connected by metricbeat, then the metricbeat pod will run fine, if there is no elasticsearch then it will keep crashing but without any impact. </li></ul></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/EAP-documentation/docs/products/gw proxy/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« GW Proxy</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/EAP-documentation/docs/products/icap server/icap-esxi"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Deploying ICAP Server on ESXI &amp; Virtualbox Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation-video" class="table-of-contents__link">Installation video</a></li><li><a href="#prerequisites" class="table-of-contents__link">Prerequisites</a></li><li><a href="#setup-aws-access" class="table-of-contents__link">Setup AWS access</a></li><li><a href="#deploying-icap-server-ova" class="table-of-contents__link">Deploying ICAP Server OVA</a></li><li><a href="#deploying-icap-server-ami" class="table-of-contents__link">Deploying ICAP Server AMI</a></li><li><a href="#remove-internet-access-from-icap-server-optional" class="table-of-contents__link">Remove Internet Access From ICAP Server (Optional)</a></li><li><a href="#troubleshooting" class="table-of-contents__link">Troubleshooting</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/EAP-documentation/docs/products">Getting Started</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2021 Glasswall Solutions Ltd. Built with Docusaurus.</div></div></div></footer></div>
<script src="/EAP-documentation/styles.839b2ce0.js"></script>
<script src="/EAP-documentation/runtime~main.263d2334.js"></script>
<script src="/EAP-documentation/main.9508753c.js"></script>
<script src="/EAP-documentation/1.8ee7a208.js"></script>
<script src="/EAP-documentation/2.85dbad46.js"></script>
<script src="/EAP-documentation/37.54ed0b04.js"></script>
<script src="/EAP-documentation/40.fce27c6d.js"></script>
<script src="/EAP-documentation/935f2afb.faa6a3a8.js"></script>
<script src="/EAP-documentation/17896441.700a4f5a.js"></script>
<script src="/EAP-documentation/458ca0c4.e039dded.js"></script>
</body>
</html>