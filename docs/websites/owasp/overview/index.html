<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.66">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-165717322-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-165717322-1",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="K8 Proxy Documentation" href="/k8-proxy-documentation/opensearch.xml"><title data-react-helmet="true">owasp Overview | K8 Proxy Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="owasp Overview | K8 Proxy Documentation"><meta data-react-helmet="true" name="description" content="Installation Guide - Proxy configuration for owasp.org"><meta data-react-helmet="true" property="og:description" content="Installation Guide - Proxy configuration for owasp.org"><meta data-react-helmet="true" property="og:url" content="https://k8-proxy.github.io/k8-proxy-documentation/docs/websites/owasp/overview"><link data-react-helmet="true" rel="shortcut icon" href="/k8-proxy-documentation/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://k8-proxy.github.io/k8-proxy-documentation/docs/websites/owasp/overview"><link rel="stylesheet" href="/k8-proxy-documentation/styles.209888ae.css">
<link rel="preload" href="/k8-proxy-documentation/styles.35429fd7.js" as="script">
<link rel="preload" href="/k8-proxy-documentation/runtime~main.08df35f9.js" as="script">
<link rel="preload" href="/k8-proxy-documentation/main.23885f1f.js" as="script">
<link rel="preload" href="/k8-proxy-documentation/1.9f15ae4b.js" as="script">
<link rel="preload" href="/k8-proxy-documentation/2.2c9ab85f.js" as="script">
<link rel="preload" href="/k8-proxy-documentation/54.c218a40d.js" as="script">
<link rel="preload" href="/k8-proxy-documentation/57.ba4c8ca9.js" as="script">
<link rel="preload" href="/k8-proxy-documentation/935f2afb.d30ae0bc.js" as="script">
<link rel="preload" href="/k8-proxy-documentation/17896441.402bfd56.js" as="script">
<link rel="preload" href="/k8-proxy-documentation/22a94d24.bb3d1592.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/k8-proxy-documentation/"><img class="navbar__logo" src="/k8-proxy-documentation/img/glasswall_logo_blue.png" alt="Glasswall Logo"><strong class="navbar__title">K8 Proxy Documentation</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/k8-proxy-documentation/docs/dashboards/websites/production">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/k8-proxy" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/k8-proxy-documentation/"><img class="navbar__logo" src="/k8-proxy-documentation/img/glasswall_logo_blue.png" alt="Glasswall Logo"><strong class="navbar__title">K8 Proxy Documentation</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/k8-proxy-documentation/docs/dashboards/websites/production">Documentation</a></li><li class="menu__list-item"><a href="https://github.com/k8-proxy" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Dashboards</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Client Welcome</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/dashboards/client-welcome/index">index</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Websites</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/dashboards/websites/deployment-notes">Deployment notes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/dashboards/websites/development">Development</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/dashboards/websites/flavors">Flavors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/dashboards/websites/notassigned">Not assigned sites</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/dashboards/websites/production">Production</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Flavors</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Flavor OVA</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/flavors/flavor-a/manual-setup-aws">Manual Setup (AWS)</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">flavor-e</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/flavors/flavor-e/manual-setup-aws">Manual Setup (AWS)</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">flavor-ova</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/flavors/flavor-ova/manual-setup-azure">Manual Setup (Azure)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/flavors/flavor-ova/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/flavors/flavor-ova/testing">Testing</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">ESXI</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">OVAs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/esxi/OVAs/overview">OVAs documentation</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Websites</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">OWASP</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/esxi/Websites/OWASP/overview">OWASP</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">glasswall-solutions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/esxi/Websites/glasswall-solutions/overview">Glasswall Solutions</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Welcome</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/esxi/Welcome/welcome">ESXi deployment</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Architecture</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/esxi/architecture/overview">Technical Architecture</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Knowledge Base</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/kb/auto-sidebar">Auto Sidebar Guidelines</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/kb/mdx">Powered by MDX</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/kb/style-guide">Style Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/kb/website-checklist">Website Implementation and documentation checklist</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Websites</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">gwfiledrop</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/websites/gwfiledrop/overview">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">adarma</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/websites/adarma/overview">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">bsigroup</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/websites/bsigroup/overview">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">emma-dataport</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/websites/emma-dataport/overview">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">fortinet</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/websites/fortinet/overview">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">gov.uk</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/websites/gov.uk/overview">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">gwengineering</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/websites/gwengineering/overview">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">atlassian</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/websites/atlassian/overview">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">gwwebsite</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/websites/gwwebsite/overview">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">mastercard</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/websites/mastercard/overview">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">microsoft</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/websites/microsoft/overview">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">miniio</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/websites/miniio/overview">Overview</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">owasp</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/k8-proxy-documentation/docs/websites/owasp/overview">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">sharepoint</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">cloud</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/websites/sharepoint/cloud/sharepoint-online-solution-administration">Sharepoint Online Solution Administration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/websites/sharepoint/cloud/sharepoint-online-solution-deployment">Sharepoint Online Solution Deployment</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">self-hosted</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">server-setup</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/websites/sharepoint/self-hosted/server-setup/1. overview">VM Setup Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/websites/sharepoint/self-hosted/server-setup/2. sp-vm-manual-install">Sharepoint VM - Manual Install</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/websites/sharepoint/self-hosted/server-setup/3. sp-vhd-to-ova">Sharepoint VHD to OVA</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/websites/sharepoint/self-hosted/server-setup/4. sp-ova-aws">Sharepoint OVA in AWS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/websites/sharepoint/self-hosted/server-setup/5. export-ova-aws">Export OVA from AWS</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/websites/sharepoint/self-hosted/sharepoint-selfhosted-solution-administration">Sharepoint Self-Hosted  Solution Administration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/websites/sharepoint/self-hosted/sharepoint-selfhosted-solution-deployment">SharePoint SelfHosted - Solution Deployment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/websites/sharepoint/self-hosted/sharepoint-selfhosted-solution-uninstall">File Handler App Deployment Uninstall</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">web</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/websites/sharepoint/web/overview">Overview</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">ukzones</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8-proxy-documentation/docs/websites/ukzones/overview">Overview</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">owasp Overview</h1></header><div class="markdown"><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="installation-guide---proxy-configuration-for-owasporg"></a>Installation Guide - Proxy configuration for owasp.org<a aria-hidden="true" tabindex="-1" class="hash-link" href="#installation-guide---proxy-configuration-for-owasporg" title="Direct link to heading">#</a></h3><p><a href="https://github.com/k8-proxy/gp-owasp-website/blob/main/sow2_0/README.md" target="_blank" rel="noopener noreferrer">https://github.com/k8-proxy/gp-owasp-website/blob/main/sow2_0/README.md</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="requirements"></a>Requirements<a aria-hidden="true" tabindex="-1" class="hash-link" href="#requirements" title="Direct link to heading">#</a></h2><ul><li><p><strong>Docker</strong></p></li><li><p><strong>Kubernetes</strong></p></li><li><p><strong>Helm 3</strong></p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="installation-with-deployed-icap-server"></a>Installation with deployed icap server<a aria-hidden="true" tabindex="-1" class="hash-link" href="#installation-with-deployed-icap-server" title="Direct link to heading">#</a></h2><ol><li><p>kubectl create namespace icap-adaptation</p></li><li><p>git clone <a href="https://github.com/anejaalekh/gp-owasp-website.git" target="_blank" rel="noopener noreferrer">https://github.com/anejaalekh/gp-owasp-website.git</a></p></li><li><p>git clone <a href="https://github.com/k8-proxy/k8-reverse-proxy.git" target="_blank" rel="noopener noreferrer">https://github.com/k8-proxy/k8-reverse-proxy.git</a> --recursive &amp;&amp; cd k8-reverse-proxy/stable-src/</p></li><li><p>Update gwproxy.env with website details i.e ALLOWED_DOMAINS, SUBFILTER_ENV</p></li><li><p>Replcae nginx/full.pem ../../gp-owasp-website/sow2_0/full.pem (gp-owasp-website is cloned in step 2)</p></li><li><p>Build images for squid and nginx. Optionally Images can be pushed to docker repository as well.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker build nginx -t [docker registry]/reverse-proxy-nginx:0.0.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker build squid -t [docker registry]/reverse-proxy-squid:0.0.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div></li><li><p>git clone <a href="https://github.com/k8-proxy/s-k8-proxy-rebuild.git" target="_blank" rel="noopener noreferrer">https://github.com/k8-proxy/s-k8-proxy-rebuild.git</a> &amp;&amp; cd s-k8-proxy-rebuild/stable-src/  </p></li><li><p>Update chart/values.yaml</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">set service.icap.enabled=false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">set service.nginx.additionalHosts </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    - www.owasp.org.glasswall-icap.com</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    - cse.google.com.glasswall-icap.com</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    - www.cse.google.com.glasswall-icap.com</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    - google.com.glasswall-icap.com</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    - www.google.com.glasswall-icap.com</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">set service.nginx.url=owasp.org.glasswall-icap.com</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div></li><li><p>Deploy the helm chart</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">helm --namespace icap-adaptation upgrade --install \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --set image.nginx.repository=glasswallsolutions/reverse-proxy-nginx \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --set image.nginx.tag=0.0.1 \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --set image.squid.repository=glasswallsolutions/reverse-proxy-squid \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --set image.squid.tag=0.0.1 \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --set application.nginx.env.ICAP_URL=icap://54.77.168.168:1344/gw_rebuild \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --set application.squid.env.ICAP_URL=icap://54.77.168.168:1344/gw_rebuild \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --set application.nginx.env.ALLOWED_DOMAINS=&#x27;owasp.org.glasswall-icap.com\,www.owasp.org.glasswall-icap.com\,cse.google.com.glasswall-icap.com\,www.cse.google.com.glasswall-icap.com\,google.com.glasswall-icap.com\,www.google.com.glasswall-icap.com&#x27; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --set application.nginx.env.ROOT_DOMAIN=&#x27;glasswall-icap.com&#x27; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --set application.nginx.env.SUBFILTER_ENV=&#x27;owasp.org\,owasp.org.glasswall-icap.com cse.google.com\,cse.google.com.glasswall-icap.com google.com\,google.com.glasswall-icap.com&#x27; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --set application.squid.env.ALLOWED_DOMAINS=&#x27;owasp.org.glasswall-icap.com\,www.owasp.org.glasswall-icap.com\,cse.google.com.glasswall-icap.com\,www.cse.google.com.glasswall-icap.com\,google.com.glasswall-icap.com\,www.google.com.glasswall-icap.com&#x27; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --set application.squid.env.ROOT_DOMAIN=&#x27;glasswall-icap.com&#x27; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  reverse-proxy chart/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div></div></div></div></div></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="verify-the-installation"></a>Verify the installation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#verify-the-installation" title="Direct link to heading">#</a></h2><ol><li>kubectl get ing -n icap-adaptation (copy the name of ingress name)</li><li>kubectl -n icap-adaptation edit ing [ingress_name_from_step1]</li><li>check spec-&gt;rules-&gt;host  and spec-&gt;tls-&gt;hosts check the entries here</li><li>kubectl get deployments -n icap-adaptation</li><li>verify nginx/squid deployment configuration i.e spec-&gt;containers-&gt;env . properties to check ICAP_URL, ALLOWED_DOMAINS, and SUBFILTER_ENV</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="installation-with-local-deployed-icap-server"></a>Installation with local deployed icap server<a aria-hidden="true" tabindex="-1" class="hash-link" href="#installation-with-local-deployed-icap-server" title="Direct link to heading">#</a></h2><ol><li><p>kubectl create namespace icap-adaptation</p></li><li><p>kubectl create -n icap-adaptation secret docker-registry regcred --docker-server=&#x27;<a href="https://index.docker.io/v1/&#x27;" target="_blank" rel="noopener noreferrer">https://index.docker.io/v1/&#x27;</a> --docker-username=[username] --docker-password=[passwd] --docker-email=email</p></li><li><p>git clone <a href="https://github.com/anejaalekh/gp-owasp-website.git" target="_blank" rel="noopener noreferrer">https://github.com/anejaalekh/gp-owasp-website.git</a></p></li><li><p>cd gp-owasp-website/sow2_0/adaptation/</p></li><li><p>helm install . --namespace icap-adaptation --generate-name</p></li><li><p>kubectl get pods -n icap-adaptation, Check Pods status should be Running. In case if icap-adaptation pod is not running in error state, delete the pod </p><p><strong>Prepare Reverse Proxy Images</strong></p></li><li><p>git clone <a href="https://github.com/k8-proxy/k8-reverse-proxy.git" target="_blank" rel="noopener noreferrer">https://github.com/k8-proxy/k8-reverse-proxy.git</a> --recursive &amp;&amp; cd k8-reverse-proxy/stable-src/</p></li><li><p>Update gwproxy.env with website details</p></li><li><p>Replcae nginx/full.pem ../../gp-owasp-website/sow2_0/full.pem (gp-owasp-website is cloned in step 3)</p></li><li><p>Build reverse proxy images</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> docker build nginx -t [docker registry]/reverse-proxy-nginx:0.0.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> docker push [docker registry]/reverse-proxy-nginx:0.0.1  # Optional</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> docker build squid -t [docker registry]/reverse-proxy-squid:0.0.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> docker push [docker registry]/reverse-proxy-squid:0.0.1 # Optional</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> wget -O c-icap/Glasswall-Rebuild-SDK-Evaluation/Linux/Library/libglasswall.classic.so https://github.com/filetrust/Glasswall-Rebuild-SDK-Evaluation/releases/download/1.117/libglasswall.classic.so</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> docker build c-icap -t [docker registry]/reverse-proxy-c-icap:0.0.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> docker push [docker registry]/reverse-proxy-c-icap:0.0.1  # Optional</span></div></div></div></div></div></li><li><p>kubectl -n icap-adaptation get svc | grep icap-service, save this value </p><p><strong>Install Reverse Proxy</strong></p></li><li><p>git clone <a href="https://github.com/k8-proxy/s-k8-proxy-rebuild.git" target="_blank" rel="noopener noreferrer">https://github.com/k8-proxy/s-k8-proxy-rebuild.git</a> &amp;&amp; cd s-k8-proxy-rebuild/stable-src/</p></li><li><p>Update website info in charts/values.yaml file (Icap url can also be updated directly in charts/templates/deployment.yaml with value from step 10, search for ICAP_URL) </p></li><li><p>Install nginx, squid reverse proxy </p></li></ol><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">helm --namespace icap-adaptation upgrade --install \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --set image.nginx.repository=[docker registry]/reverse-proxy-nginx \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --set image.nginx.tag=0.0.1 \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --set image.squid.repository=[docker registry]/reverse-proxy-squid \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --set image.squid.tag=0.0.1 \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --set image.icap.repository=[docker registry]/reverse-proxy-c-icap \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --set image.icap.tag=0.0.1 \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --set application.nginx.env.ALLOWED_DOMAINS=&#x27;owasp.org.glasswall-icap.com\,www.owasp.org.glasswall-icap.com,cse.google.com.glasswall-icap.com,www,cse.google.com.glasswall-icap.com,google.com.glasswall-icap.com,www,google.com.glasswall-icap.com&#x27; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --set application.nginx.env.ROOT_DOMAIN=&#x27;glasswall-icap.com&#x27; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --set application.nginx.env.SUBFILTER_ENV=&#x27;owasp.org\,owasp.org.glasswall-icap.com cse.google.com,cse.google.com.glasswall-icap.com google.com google.com.glasswall-icap.com&#x27; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --set application.squid.env.ALLOWED_DOMAINS=&#x27;owasp.org.glasswall-icap.com\,www.owasp.org.glasswall-icap.com,cse.google.com.glasswall-icap.com,www,cse.google.com.glasswall-icap.com,google.com.glasswall-icap.com,www,google.com.glasswall-icap.com&#x27; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --set application.squid.env.ROOT_DOMAIN=&#x27;glasswall-icap.com&#x27; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  reverse-proxy chart/</span></div></div></div></div></div><ol start="14"><li><p>Verify the website values for nginx ingress, squid and nginx deployment.</p></li><li><p>Update the ICAP URL in squid and nginx deployment with value from step 10, if not updated already </p></li><li><p>Verify all the pods in icap-adaptation namespace</p></li><li><p>sudo kubectl -n icap-adaptation port-forward --address 0.0.0.0 svc/reverse-proxy-reverse-proxy-nginx 443:443</p><p><strong>Note:</strong></p></li><li><p>When request is sent from browser, verify that rebuild pods are created and in Running status. Sometimes they are not able to pull images. Manually pull the images or docker login solves the problem. </p></li><li><p>Verify ingress details as well, host and path details should be proper.</p></li><li><p><a href="https://github.com/filetrust/icap-infrastructure" target="_blank" rel="noopener noreferrer">https://github.com/filetrust/icap-infrastructure</a> has issues(unbounded volume claim), so adaptation folder content is modified and placed inside sow2_0/adaptation folder</p></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="owasp-search-scenario"></a>OWASP Search Scenario<a aria-hidden="true" tabindex="-1" class="hash-link" href="#owasp-search-scenario" title="Direct link to heading">#</a></h2><p>In owasp website search results were not working properly as Owasp use JS functions from cse.google.com and google.com. Search results were fetched by JS. As this was done on browser and we were proxing owasp.org url. Due to this search results urls were not rewritten. As a fix we are rewitting cse.google.com and google.com. Updated allowed domains are:  owasp.org.glasswall-icap.com,<a href="http://www.owasp.org.glasswall-icap.com,cse.google.com.glasswall-icap.com,www.cse.google.com.glasswall-icap.com,google.com.glasswall-icap.com,www.google.com.glasswall-icap.com" target="_blank" rel="noopener noreferrer">www.owasp.org.glasswall-icap.com,cse.google.com.glasswall-icap.com,www.cse.google.com.glasswall-icap.com,google.com.glasswall-icap.com,www.google.com.glasswall-icap.com</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="repository"></a>Repository<a aria-hidden="true" tabindex="-1" class="hash-link" href="#repository" title="Direct link to heading">#</a></h3><p><a href="https://github.com/k8-proxy/gp-owasp-website" target="_blank" rel="noopener noreferrer">https://github.com/k8-proxy/gp-owasp-website</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="flavor-setup"></a>Flavor Setup<a aria-hidden="true" tabindex="-1" class="hash-link" href="#flavor-setup" title="Direct link to heading">#</a></h3><p>Flavor E</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="manual-website-setup"></a>Manual Website Setup<a aria-hidden="true" tabindex="-1" class="hash-link" href="#manual-website-setup" title="Direct link to heading">#</a></h3><p>Same instructions as above.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="automated-website-setup"></a>Automated Website Setup<a aria-hidden="true" tabindex="-1" class="hash-link" href="#automated-website-setup" title="Direct link to heading">#</a></h3><p>NA</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="proxy-configuration"></a>Proxy Configuration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#proxy-configuration" title="Direct link to heading">#</a></h3><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="versions"></a>Versions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#versions" title="Direct link to heading">#</a></h1><p>Kubernetes Version: 1.17.8
OS: Centos
Helm: 3.4.0
Icap Flavor: Sow</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="cloud-details"></a>Cloud Details<a aria-hidden="true" tabindex="-1" class="hash-link" href="#cloud-details" title="Direct link to heading">#</a></h1><p>Hosted on AWS
regions: eu-west1(Ireland)
Instance Type: t3.2xlarge</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/k8-proxy-documentation/docs/websites/miniio/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« miniio Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/k8-proxy-documentation/docs/websites/sharepoint/cloud/sharepoint-online-solution-administration"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Sharepoint Online Solution Administration Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation-guide---proxy-configuration-for-owasporg" class="table-of-contents__link">Installation Guide - Proxy configuration for owasp.org</a></li><li><a href="#requirements" class="table-of-contents__link">Requirements</a></li><li><a href="#installation-with-deployed-icap-server" class="table-of-contents__link">Installation with deployed icap server</a></li><li><a href="#verify-the-installation" class="table-of-contents__link">Verify the installation</a></li><li><a href="#installation-with-local-deployed-icap-server" class="table-of-contents__link">Installation with local deployed icap server</a></li><li><a href="#owasp-search-scenario" class="table-of-contents__link">OWASP Search Scenario</a><ul><li><a href="#repository" class="table-of-contents__link">Repository</a></li><li><a href="#flavor-setup" class="table-of-contents__link">Flavor Setup</a></li><li><a href="#manual-website-setup" class="table-of-contents__link">Manual Website Setup</a></li><li><a href="#automated-website-setup" class="table-of-contents__link">Automated Website Setup</a></li><li><a href="#proxy-configuration" class="table-of-contents__link">Proxy Configuration</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/k8-proxy-documentation/docs/dashboards/websites/production">Getting Started</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2021 Glasswall Solutions Ltd. Built with Docusaurus.</div></div></div></footer></div>
<script src="/k8-proxy-documentation/styles.35429fd7.js"></script>
<script src="/k8-proxy-documentation/runtime~main.08df35f9.js"></script>
<script src="/k8-proxy-documentation/main.23885f1f.js"></script>
<script src="/k8-proxy-documentation/1.9f15ae4b.js"></script>
<script src="/k8-proxy-documentation/2.2c9ab85f.js"></script>
<script src="/k8-proxy-documentation/54.c218a40d.js"></script>
<script src="/k8-proxy-documentation/57.ba4c8ca9.js"></script>
<script src="/k8-proxy-documentation/935f2afb.d30ae0bc.js"></script>
<script src="/k8-proxy-documentation/17896441.402bfd56.js"></script>
<script src="/k8-proxy-documentation/22a94d24.bb3d1592.js"></script>
</body>
</html>